<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    BackgroundColor="White"
    Title="Моніторинг"
    x:Class="TaskMonAdmin.MonitoringPage"
    x:DataType="viewModels:MonitoringPageViewModel"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:behaviors="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
    xmlns:material="http://schemas.enisn-projects.io/dotnet/maui/uraniumui/material"
    xmlns:maui="clr-namespace:LiveChartsCore.SkiaSharpView.Maui;assembly=LiveChartsCore.SkiaSharpView.Maui"
    xmlns:viewModels="clr-namespace:TaskMonAdmin.ViewModels"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml">

    <ContentPage.Content>
        <StackLayout Padding="10">
           
            <ScrollView
                Margin="0,0,0,10"
                MaximumHeightRequest="150">
                <StackLayout BindableLayout.ItemsSource="{Binding SurveyCheckBoxes}">
                    <BindableLayout.ItemTemplate>
                        <DataTemplate>
                            <StackLayout Orientation="Horizontal">
                                <CheckBox IsChecked="{Binding IsSelected, Source={RelativeSource AncestorType={x:Type viewModels:SurveyCheckBoxItem}}, Mode=TwoWay}"
                                          Margin="0,0"
                                          CheckedChanged="CheckBox_OnCheckedChanged">
                                </CheckBox>
                                <Label Margin="0,12,0,0" Text="{Binding Name, Source={RelativeSource AncestorType={x:Type viewModels:SurveyCheckBoxItem}}}" />
                            </StackLayout>
                        </DataTemplate>
                    </BindableLayout.ItemTemplate>
                </StackLayout>
            </ScrollView>
            
            <ActivityIndicator
                HorizontalOptions="Center"
                IsRunning="{Binding IsLoading}"
                IsVisible="{Binding IsLoading}"
                VerticalOptions="Center" />

            <maui:CartesianChart
                HeightRequest="300"
                IsVisible="{Binding IsLoading, Converter={StaticResource InvertedBoolConverter}}"
                ZoomMode="X"
                Series="{Binding Series}"
                XAxes="{Binding XAxes}"
                YAxes="{Binding YAxes}" />
        </StackLayout>
    </ContentPage.Content>
</ContentPage>